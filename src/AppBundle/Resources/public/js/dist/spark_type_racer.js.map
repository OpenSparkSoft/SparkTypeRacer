{"version":3,"sources":["webpack:///webpack/bootstrap 4f498713e990270c095e","webpack:///./src/main.ts","webpack:///./src/app.ts","webpack:///./src/services/game.service.ts","webpack:///./src/entities/key_time.entity.ts","webpack:///./src/config/config.ts"],"names":[],"mappings":"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","file":"spark_type_racer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4f498713e990270c095e","/**\r\n * Created by Grimbode on 21/11/2017.\r\n */\r\nimport {App} from \"./app\";\r\nvar module;\r\n/**\r\n * Created by kfaulhaber on 30/06/2017.\r\n */\r\n\r\n/**\r\n * Binding library to exports\r\n * @type {App}\r\n */\r\nmodule.exports = App;\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","\r\n\r\nimport {GameService} from \"./services/game.service\";\r\nimport {CONFIG} from \"./config/config\";\r\nexport class App {\r\n\r\n    private gameService;\r\n\r\n    constructor(options: any){\r\n\r\n        for(let prop in CONFIG){\r\n            if(!CONFIG.hasOwnProperty(prop) || !options.hasOwnProperty(prop) || options.hasOwnProperty(prop) === null){\r\n                console.warn(\"Required parameteres missing.\");\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.gameService = new GameService(\r\n            \"let's make this a super long text and see if it works any better! :D let's make this a super long text and see if it works any better! :D let's make this a super long text and see if it works any better! :D\", options.canvas);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app.ts","import {KeyTime} from \"../entities/key_time.entity\";\r\n/**\r\n * Created by Grimbode on 22/11/2017.\r\n */\r\n\r\nexport class GameService {\r\n\r\n    private position = 0;\r\n    private error: boolean = false;\r\n    private proof: KeyTime[] = [];\r\n    private ctx: CanvasRenderingContext2D;\r\n\r\n    constructor(\r\n        private text: string,\r\n        private canvas: HTMLCanvasElement\r\n    ){\r\n        this.ctx = canvas.getContext(\"2d\");\r\n        //TODO: Make size dynamic\r\n        this.ctx.font = \"30px Arial\";\r\n        this.bindKeys();\r\n    }\r\n\r\n    private bindKeys(){\r\n        //Capturing event at the start for maximal precision\r\n        window.addEventListener(\"keypress\", this.gameKeyHandler, true);\r\n    }\r\n\r\n    private unbindKeys(){\r\n        //Removing key events in case of cheating or game done.\r\n        window.removeEventListener(\"keydown\", this.gameKeyHandler, true);\r\n    }\r\n\r\n    private gameKeyHandler = (e: KeyboardEvent) => {\r\n        //Get date of keypressed\r\n        let time = new Date();\r\n        let charCode = e.which;\r\n\r\n        //TODO: Might need to handle special character codes. For now, no one cares.\r\n\r\n        switch(true){\r\n            case charCode === 8 || charCode === 46:\r\n                //todo: delete a key\r\n                console.warn(\"Delete key detected\");\r\n                break;\r\n            case (charCode >= 48 && charCode <= 90) ||\r\n                    (charCode >= 106 && charCode <= 111) ||\r\n                        (charCode >= 187 || charCode <= 222):\r\n                this.gameLogic(e.which, time);\r\n                break;\r\n            default:\r\n                console.warn(`${charCode} not accepted.`);\r\n        }\r\n\r\n\r\n\r\n    };\r\n\r\n    private gameLogic (charCode: number, time: Date){\r\n\r\n        //COnvert code to character.\r\n        let char = String.fromCharCode(charCode);\r\n\r\n        //reset any previous variables\r\n        this.error = false;\r\n\r\n        //If the position isn't somewhere within the text.\r\n        if (this.position > this.text.length -1 || this.position < 0){\r\n            //TODO: Throw error.\r\n            return;\r\n        }\r\n\r\n        //If the character pressed is not the character expected.\r\n        if(this.text[this.position] !== char){\r\n            //TODO: Throw error.\r\n            this.proof.push(new KeyTime(char, time, false));\r\n            this.error = true;\r\n            this.predraw(10, 30, 30);\r\n            console.log(\"Error detected\", this.text[this.position], char);\r\n            return;\r\n        }\r\n\r\n        //Here we assume the key pressed was correct.\r\n        this.proof.push(new KeyTime(char, time, true));\r\n        this.position++;\r\n\r\n        this.predraw(10, 30, 30);\r\n\r\n        if(this.isDone()){\r\n            //TODO: Done with game, save results.\r\n            console.log(\"Congratulations game is done\");\r\n            this.unbindKeys();\r\n        }\r\n\r\n    }\r\n\r\n    private draw(line: string, x: number, y: number) {\r\n\r\n\r\n\r\n        //Calculate what has already been written.\r\n        let done = line.slice(0, this.position);\r\n        //Calculate what is left to write\r\n        let todo = line.slice(this.position);\r\n\r\n\r\n        this.ctx.fillStyle = \"green\";\r\n        this.ctx.fillText(done, x, y);\r\n\r\n        if(this.error === true){\r\n            this.ctx.fillStyle = \"red\";\r\n            let wrongChar = line.slice(this.position, this.position+1);\r\n            this.ctx.fillText(wrongChar, x+this.ctx.measureText(done).width, y);\r\n            //recalculating todo\r\n            todo = line.slice(this.position+1);\r\n            done += wrongChar;\r\n        }\r\n\r\n        x += this.ctx.measureText(done).width;\r\n        this.ctx.fillStyle = \"black\";\r\n        this.ctx.fillText(todo, x, y);\r\n    }\r\n\r\n    private predraw(x: number, y: number, lineHeight: number){\r\n        //Clear whole rect.\r\n        this.ctx.clearRect(0,0, this.canvas.width, this.canvas.height);\r\n\r\n        let line = \"\";\r\n        this.text.split(' ').forEach((value, index)=>{\r\n            let temp = `${line} ${value}`.trim();\r\n            //If the size of the text is bigger than the width of the canvas.\r\n            if(this.ctx.measureText(temp).width >= this.canvas.width){\r\n                this.draw(line, x, y);\r\n                line = \"\";\r\n                //Update y\r\n                y += lineHeight;\r\n            } else {\r\n                line = temp;\r\n            }\r\n        });\r\n\r\n        //When done, check to see if there isn't a few words left.\r\n        if(line != \"\"){\r\n            this.draw(line, x, y);\r\n        }\r\n    }\r\n\r\n    private isDone(): boolean {\r\n        return this.position === this.text.length;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/game.service.ts","/**\r\n * Created by Grimbode on 22/11/2017.\r\n */\r\n\r\nexport class KeyTime {\r\n\r\n    //Make unmodifiable.\r\n    readonly key: string;\r\n    readonly time: Date;\r\n    readonly correct: boolean;\r\n\r\n    constructor(\r\n        key: string, time: Date, correct: boolean\r\n    ){\r\n        this.key = key;\r\n        this.time = time;\r\n        this.correct = correct;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/key_time.entity.ts","/**\r\n * Created by Grimbode on 22/11/2017.\r\n */\r\n\r\n//All configurations possible for the game.\r\nexport const CONFIG = {\r\n    canvas: null\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config/config.ts"],"sourceRoot":""}